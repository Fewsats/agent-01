# ant


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

This file will become your README and also the index of your
documentation.

## Developer Guide

If you are new to using `nbdev` here are some useful pointers to get you
started.

## Usage

### Installation

Install latest from the GitHub
[repository](https://github.com/Fewsats/ant):

``` sh
$ pip install git+https://github.com/Fewsats/ant.git
```

## How to use

Let’s demonstrate how to use the
[`add_l402_tool`](https://Fewsats.github.io/ant/core.html#add_l402_tool)
function to dynamically add new tools to our AI agent.

``` python
from ant.core import add_l402_tool
from cosette import Chat    

tools = []
chat = Chat('gpt-4o-mini', sp='You are a helpful assistant that provides information about L402 URIs and your available tools. If you do not have any tools, please say so.', tools=tools)

chat("which tools do you have available?")
```

I do not have any tools available. However, I can provide information
and answer questions about L402 URIs and related topics. How may I
assist you?

<details>

- id: chatcmpl-AGsPypK5yVfftQhTxdL6qINeS49z1
- choices: \[Choice(finish_reason=‘stop’, index=0, logprobs=None,
  message=ChatCompletionMessage(content=‘I do not have any tools
  available. However, I can provide information and answer questions
  about L402 URIs and related topics. How may I assist you?’,
  refusal=None, role=‘assistant’, function_call=None,
  tool_calls=None))\]
- created: 1728585794
- model: gpt-4o-mini-2024-07-18
- object: chat.completion
- service_tier: None
- system_fingerprint: fp_8552ec53e1
- usage: CompletionUsage(completion_tokens=32, prompt_tokens=48,
  total_tokens=80,
  completion_tokens_details=CompletionTokensDetails(audio_tokens=None,
  reasoning_tokens=0),
  prompt_tokens_details=PromptTokensDetails(audio_tokens=None,
  cached_tokens=0))

</details>

Now, let’s add a tool that can add new tools given a L402 URI
description. In this case, we will add a tool that can scrape a website.

``` python
def add_l402_tool(uri: str) -> str:
    """Add a new tool to the agent's toolset."""
    info = get_l402_uri_info(uri)
    r = generate_python_function(info)
    func_code = extract_function_code(get_text(r))

    cf = create_func(func_code)
    tools.append(cf)
    return f"tool {cf.__name__} added"

tools.append(add_l402_tool)
```

Now the agent can add new tools given a L402 URI description. Now we can
add a web scraping tool and the agent can scrape a website

``` python
uri = "l402://api.fewsats.com/v0/gateway/f12e5deb-b07b-4af4-a4f2-3fbf076228a9/info" # web scraping endpoint
get_l402_uri_info(uri)
```

    {'access': {'authentication': {'format': 'L402 {credentials}:{proof_of_payment}',
       'header': 'Authorization',
       'protocol': 'L402'},
      'endpoint': 'https://api.fewsats.com/v0/gateway/access/f12e5deb-b07b-4af4-a4f2-3fbf076228a9',
      'method': 'POST'},
     'content_type': 'api',
     'cover_url': '',
     'description': 'Scrape a given URL. Pass the URL as JSON in the request body as follows:\n```\n {"url": url }\n```',
     'name': 'Web Scraper TF',
     'pricing': [{'amount': 1, 'currency': 'USD'}],
     'version': '0.1'}

``` python
chat = Chat(model="gpt-4o-mini", sp="You are a helpful assistant that provides information about L402 URIs and your available tools. If you do not have any tools, please say so.", tools=tools)

def pchoice(r): print(r.choices[0]) # this function will print the choices made by the agent
chat.toolloop(f"can you summarize this website? https://fewsats.com. You can use this tool {uri}", trace_func=pchoice)
```

    Choice(finish_reason='tool_calls', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_SFabtoCS5GMWqAKRfgzjJJmw', function=Function(arguments='{"uri":"l402://api.fewsats.com/v0/gateway/f12e5deb-b07b-4af4-a4f2-3fbf076228a9/info"}', name='add_l402_tool'), type='function')]))
    Choice(finish_reason='tool_calls', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_WHh8aVx1QSNtvABziFdnaPpx', function=Function(arguments='{"url":"https://fewsats.com"}', name='scrape_url_web_scraper'), type='function')]))
    Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content="The website [fewsats.com](https://fewsats.com) is centered around the L402 protocol, which builds on HTTP and the Lightning network to create machine-friendly, internet-first paywalls. Here are the key points from the site:\n\n- **L402 Protocol**: This is an open protocol designed to facilitate internet-native paywalls, allowing developers to create innovative solutions based on it.\n  \n- **Real-Time Data Integration**: The service enhances AI applications by providing access to contextual data and tools, notably improving the functionality of bots through technology like Retrieval Augmented Generation (RAG).\n  \n- **Use Case Example**: An illustrative example on the site shows how users can inquire about real-time sports scores, specifically referencing the last Yankees match, highlighting the protocol's capability to deliver timely and relevant information.\n\nOverall, the site underscores the importance of machine-friendly data services and how they can enrich AI systems and end-user experiences.", refusal=None, role='assistant', function_call=None, tool_calls=None))

The website [fewsats.com](https://fewsats.com) is centered around the
L402 protocol, which builds on HTTP and the Lightning network to create
machine-friendly, internet-first paywalls. Here are the key points from
the site:

- **L402 Protocol**: This is an open protocol designed to facilitate
  internet-native paywalls, allowing developers to create innovative
  solutions based on it.

- **Real-Time Data Integration**: The service enhances AI applications
  by providing access to contextual data and tools, notably improving
  the functionality of bots through technology like Retrieval Augmented
  Generation (RAG).

- **Use Case Example**: An illustrative example on the site shows how
  users can inquire about real-time sports scores, specifically
  referencing the last Yankees match, highlighting the protocol’s
  capability to deliver timely and relevant information.

Overall, the site underscores the importance of machine-friendly data
services and how they can enrich AI systems and end-user experiences.

<details>

- id: chatcmpl-AGssE9zRGQXNiPjhPDaZX4W43ZXAo
- choices: \[Choice(finish_reason=‘stop’, index=0, logprobs=None,
  message=ChatCompletionMessage(content=“The website
  [fewsats.com](https://fewsats.com) is centered around the L402
  protocol, which builds on HTTP and the Lightning network to create
  machine-friendly, internet-first paywalls. Here are the key points
  from the site:- **L402 Protocol**: This is an open protocol designed
  to facilitate internet-native paywalls, allowing developers to create
  innovative solutions based on it.- **Real-Time Data Integration**: The
  service enhances AI applications by providing access to contextual
  data and tools, notably improving the functionality of bots through
  technology like Retrieval Augmented Generation (RAG).- **Use Case
  Example**: An illustrative example on the site shows how users can
  inquire about real-time sports scores, specifically referencing the
  last Yankees match, highlighting the protocol’s capability to deliver
  timely and relevant information., the site underscores the importance
  of machine-friendly data services and how they can enrich AI systems
  and end-user experiences.”, refusal=None, role=‘assistant’,
  function_call=None, tool_calls=None))\]
- created: 1728587546
- model: gpt-4o-mini-2024-07-18
- object: chat.completion
- service_tier: None
- system_fingerprint: fp_f85bea6784
- usage: CompletionUsage(completion_tokens=189, prompt_tokens=1261,
  total_tokens=1450,
  completion_tokens_details=CompletionTokensDetails(audio_tokens=None,
  reasoning_tokens=0),
  prompt_tokens_details=PromptTokensDetails(audio_tokens=None,
  cached_tokens=0))

</details>

We can see the agent: 1. Adds the scraping tool provided by the L402
URI. 2. Uses the newly added tool to scrape the website 3. Summarizes
the content.
